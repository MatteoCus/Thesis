\chapter{Elementi caratterizzanti del progetto}
\label{cap:elementi-progetto}
% Qui introdurrò brevemente il contenuto delle sezioni sottostanti.
Questo capitolo si occupa di introdurre gli strumenti utilizzati nel corso del tirocinio, definire e dare una visione concreta delle attività di sviluppo del progetto di \textit{stage} e dare prova dei risultati raggiunti
a livello di documentazione, di codice scritto, \textit{test coverage} e obiettivi raggiunti.

\section{Stile lavorativo}

% In questa sezione descriverò il modo in cui ho lavorato nel corso del tirocinio, descrivendo attività esterne allo sviluppo, alla verifica ed alla validazione e descrivendo il modo in cui invece tali attività sono state ideate.
Data la pianificazione a cadenza settimanale delle attività (sezione \hyperref[sec:pianificazione]{§2.5}), ho concordato con il \textit{tutor} aziendale, il signor \textit{Michele Rigo}, l'organizzazione di una riunione di allineamento settimanale, programmata per ogni lunedì mattina. \\
Tale incontro mirava a:
\begin{itemize}
    \item Mostrare il lavoro svolto nel corso della settimana precedente alla riunione;
    \item Condurre una retrospettiva sulla settimana precedente;
    \item Valutare lo stato di avanzamento del progetto in relazione alle aspettative;
    \item Delineare le attività da svolgere nella settimana in corso.
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{images/difference-between-ux-and-ui.jpg}
    \caption[Confronto tra la progettazione di interfacce e di esperienze utente]{Confronto tra la progettazione di interfacce (\textit{UI, User Interface}) e di esperienze utente (\textit{UX, User Experience})\footnotemark}
\end{figure}
\footnotetext{Fonte: \href{https://careerfoundry.com/en/blog/ux-design/the-difference-between-ux-and-ui-design-a-laymans-guide/}{https://careerfoundry.com}}
Abbiamo svolto degli incontri aggiuntivi in forma telematica per chiarire alcuni aspetti del progetto, in particolare la comprensione di alcuni requisiti utente e la definizione di determinati aspetti
di interfaccia grafica ed esperienza utente (ovvero come l'utente può interagire con l'interfaccia grafica, la relazione che intercorre tra egli e gli elementi grafici). \\
Per tutta la durata delle attività di \textit{stage}, sono stato affiancato in caso di necessità da praticamente tutto il \textit{team \textbf{Trizeta}}, soprattutto per quanto concerne la progettazione dell'interfaccia grafica.

% \newline

% Le attività di sviluppo del prodotto hanno seguito le specifiche del \textbf{modello a V}, ovvero:
% \begin{figure}[H]
%     \centering
%     \includegraphics[width=\textwidth]{images/v-model.jpg}
%     \caption[Modello di sviluppo del prodotto adottato]{Modello di sviluppo del prodotto adottato\footnotemark}
% \end{figure}
% \footnotetext{Fonte: \href{https://www.shiksha.com/online-courses/articles/v-model-software-engineering/}{https://www.shiksha.com}}

\section{Strumenti utilizzati}
% In questa sezione descriverò gli strumenti utilizzati nel corso del progetto, suddividendoli in base alle attività in cui essi sono stati impiegati.

\subsection{Strumenti di sviluppo}
    \subsubsection*{Angular} %did
        \begin{itemize}[align=left]
            \item [\textit{Versione}:] 16.2.9
            \item [\textit{Descrizione}:] è un \textit{framework open-source} per lo sviluppo di applicazioni \textit{web} a singola pagina (è un tipo di applicazione \textit{web} che opera all'interno di una singola pagina \textit{web}, senza la necessità di ricaricarla durante l'interazione dell'utente). \\
                    Sviluppato da \textit{Google}, \textit{Angular} fornisce una struttura per la costruzione di applicazioni \textit{web} che consentono agli sviluppatori di utilizzare il linguaggio \textit{TypeScript} o \textit{JavaScript} per la creazione di componenti riutilizzabili.
        \end{itemize}
    \subsubsection*{Angular Material} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 16.2.8
        \item [\textit{Descrizione}:] è una libreria di componenti grafiche e direttive, sviluppata da \textit{Google} e progettata per essere utilizzata con il \textit{framework Angular}. \\
                     Questa libreria fornisce una serie di componenti predefiniti e stilizzati che semplificano la creazione di interfacce utente coerenti e moderne all'interno delle applicazioni \textit{Angular}.
    \end{itemize}

    \subsubsection*{CSS} %did
    \label{subsubsec:css}
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 3
        \item [\textit{Descrizione}:] è un linguaggio di stile utilizzato per definire la presentazione di documenti \textit{HTML} e \textit{XML}; determina come i documenti devono essere visualizzati sullo schermo, sulla carta o in altri tipi di supporto.
    \end{itemize}

    \subsubsection*{Figma} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 9.0
        \item [\textit{Descrizione}:] è un'applicazione di progettazione e prototipazione basata su \textit{cloud} (\textit{software} il cui funzionamento e archiviazione dei dati avvengono prevalentemente attraverso risorse di calcolo e archiviazione disponibili su \textit{Internet}, anziché su risorse locali o \textit{server} fisici)
                    che consente di collaborare in tempo reale su progetti di interfaccia utente (\textit{UI}) ed esperienza utente (\textit{UX}).
    \end{itemize}

    \subsubsection*{HTML} %did
    \label{subsubsec:html}
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 5
        \item [\textit{Descrizione}:] è il linguaggio \textit{standard} utilizzato per la creazione e la strutturazione di pagine \textit{web}; lavora in collaborazione con \textit{CSS} e \textit{JavaScript} per creare esperienze \textit{web} complete e interattive.
    \end{itemize}

    \subsubsection*{Jasmine} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 4.6.0
        \item [\textit{Descrizione}:] è un \textit{framework} di \textit{testing} popolare per \textit{JavaScript} ed è comunemente utilizzato per testare le applicazioni \textit{Angular}.
    \end{itemize}

    \subsubsection*{Karma} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 6.4.0
        \item [\textit{Descrizione}:] è uno strumento ampiamente utilizzato per l'esecuzione di \textit{test} di unità per applicazioni \textit{Angular}. \\
                    \textit{Karma} genera un \textit{server web} che esegue il codice di \textit{test Javascript} (e \textit{TypeScript}, che ne è sovralinguaggio) per ogni \textit{browser} connesso.
    \end{itemize}

    \subsubsection*{Node.js} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 18.17.1
        \item [\textit{Descrizione}:] è un ambiente di \textit{runtime open source} basato sul motore \textit{JavaScript} V8 di \textit{Google Chrome}. \\
                    Consente di eseguire codice \textit{JavaScript} lato \textit{server}, dando l'opportunità agli sviluppatori di utilizzare \textit{JavaScript} per lo sviluppo di applicazioni \textit{back-end}.
    \end{itemize}

    \begin{figure}[H]
      \centering
      \includegraphics[width=0.7\textwidth]{tools/node.png}
      \caption{Diagramma del \textit{runtime Node.js} e dei pacchetti in esso installati}
    \end{figure}

    \subsubsection*{Ng-openapi-gen} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 0.50.2
        \item [\textit{Descrizione}:] è un modulo \textit{npm} (il gestore di pacchetti per \textit{Node.js}) che genera servizi,
                    modelli e funzioni \textit{Angular} a partire da una specifica \textit{OpenAPI 3} (è uno \textit{standard} che aiuta a descrivere e documentare le Interfacce di Programmazione delle Applicazioni, \glslink{apig}{\textit{API}}).
    \end{itemize}

    \subsubsection*{Ngx-translate} %did
    \label{subsubsec:ngx}
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 15.0.0
        \item [\textit{Descrizione}:] libreria che consente l'internazionalizzazione (ovvero facilita l'astrazione del contenuto statico di un'applicazione \textit{web} rispetto alla lingua di fruizione) e la localizzazione (ovvero consente di adattare il \textit{software} in base alle esigenze culturali dell'area in cui il prodotto viene usato) in \textit{Angular}.
    \end{itemize}

    \subsubsection*{StarUML}
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 6.0.1
        \item [\textit{Descrizione}:] è uno strumento di modellazione \textit{UML}\footnote{\glslink{umlg}{\textit{Unified Modeling Language}}} (\textit{Unified Modeling Language}) che offre un ambiente grafico per progettare e visualizzare diagrammi \glslink{umlg}{\textit{UML}}. \\
                \glslink{umlg}{\textit{UML}} è uno \textit{standard} per la modellazione visuale di sistemi \textit{software}, ed è utilizzato per rappresentare graficamente diversi aspetti di un sistema come le classi, i casi d'uso, le sequenze di chiamate, le attività, e altro ancora.
    \end{itemize}

    \subsubsection*{TypeScript} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 5.1.6
        \item [\textit{Descrizione}:] è un linguaggio di programmazione \textit{open-source} sviluppato da \textit{Microsoft}. \\
                È una versione "\textit{superset}" di \textit{JavaScript}, il che significa che aggiunge nuove funzionalità e tipizzazione statica al linguaggio \textit{JavaScript}.
    \end{itemize}

    \begin{figure}[H]
      \centering
      \includegraphics[width=0.7\textwidth]{tools/angular.png}
      \caption{Diagramma dei \textit{framework}, delle librerie e dei linguaggi usati}
    \end{figure}

    \subsubsection*{Visual Studio Code} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 1.84.1
        \item [\textit{Descrizione}:] è un \textit{editor} di codice sorgente gratuito e \textit{open-source} sviluppato da \textit{Microsoft}. \\
                È progettato per essere leggero, flessibile e altamente personalizzabile, rendendolo uno strumento popolare tra gli sviluppatori per la scrittura di codice in diversi linguaggi di programmazione.
    \end{itemize}
    \begin{figure}[H]
      \centering
      \includegraphics[height=4cm]{tools/vscode.png}
      \caption{Diagramma degli \textit{editor} di testo usati}
    \end{figure}


\subsection{Strumenti di versionamento}
    \subsubsection*{Git}
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 2.43.0
        \item [\textit{Descrizione}:] è un sistema di controllo delle versioni distribuito (\textit{DVCS, Distributed Version Control System}), utilizzato per tracciare le modifiche apportate al codice sorgente durante lo sviluppo del \textit{software}.
    \end{itemize}

    \subsubsection*{GitHub} %did
    \begin{itemize}[align=left]
        \item [\textit{Versione}:] 3.11.0
        \item [\textit{Descrizione}:] è una piattaforma di \textit{hosting} per il controllo delle versioni e la collaborazione. \\
                    Offre servizi basati su \textit{Git} e facilita la gestione e la condivisione dei progetti \textit{software}.
    \end{itemize}

\subsection{Strumenti di documentazione}

\subsubsection*{Compodoc} %did
\begin{itemize}[align=left]
    \item [\textit{Versione}:] 1.1.22
    \item [\textit{Descrizione}:] strumento \textit{open-source} per la generazione di documentazione per \textit{web app Angular} a partire da commenti scritti nel codice sorgente.
\end{itemize}

\subsubsection*{LibreOffice} %did
\begin{itemize}[align=left]
    \item [\textit{Versione}:] 7.6.2
    \item [\textit{Descrizione}:] è una \textit{suite} di \textit{software} per l'ufficio libera e \textit{open-source} che offre un insieme di applicazioni per la produttività personale e professionale. \\
                È sviluppato dalla comunità di sviluppatori di \textit{The Document Foundation} ed è una delle alternative più popolari e complete a \textit{suite} di produttività come \textit{Microsoft Office}.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.7\textwidth]{tools/github.png}
  \caption[Diagramma degli strumenti di documentazione]{Diagramma che rappresenta la relazione tra la documentazione (gestita tramite \textit{GitHub}) e gli strumenti adottati per redigerla}
\end{figure}
\section{Analisi dei requisiti}
\label{sec:analisi}
% In questa sezione descriverò lo scopo dell'analisi dei requisiti in un progetto, le problematiche riscontrate e mostrerò i principali casi d'uso ed i principali requisiti elaborati.
Le attività di \textbf{analisi dei requisiti} hanno come scopo la comprensione dei bisogni espressi dall'utente finale (o da chi vuole risolvere tali bisogni all'utente finale, talvolta nemmeno noti all'utente finale \footnote{Fonte: \href{https://www.mountaingoatsoftware.com/articles/i-didnt-know-i-needed-that}{https://www.mountaingoatsoftware.com}})
detti "requisiti utente", e la definizione di "ciò che deve svolgere il prodotto" per soddisfare tali bisogni, detti "requisiti del prodotto". \\
Ho iniziato le attività di \textbf{analisi} con un incontro sincrono, insieme al \textit{tutor} aziendale, relativo all'infrastruttura aziendale esistente (contesto delle attività produttive) e al ruolo che il prodotto da sviluppare (di nome \textit{ADeQA}) ricopre in questo contesto. \\
In seguito alla contestualizzazione delle mie attività di \textit{stage}, il \textit{tutor} aziendale ed io abbiamo discusso dei bisogni da soddisfare: ho dovuto eseguire più passi di raffinazione dei bisogni espressi (descritti in seguito) per arrivare a definire i requisiti del prodotto.

\subsection{Casi d'uso}
Con "caso d'uso" si intende un'astrazione utilizzata per catturare, descrivere e definire le interazioni tra un prodotto e gli attori (utenti o altri \textit{software}) che interagiscono con esso. \\
Un caso d'uso è una rappresentazione (narrativa e/o schematica) di uno scenario che descrive come il sistema deve rispondere alle richieste degli utenti in determinate circostanze: serve per eseguire una prima schematizzazione dei bisogni utente,
specificandoli in una serie casi d'uso più dettagliati qualora ve ne fosse la possibilità. \\
I casi d’uso qui presenti mirano a dare comprensione dei requisiti utente principali, pertanto non riporto tutti i casi d'uso identificati in sede di \textit{stage}.

\subsubsection*{Nomenclatura}
I casi d'uso sono identificati da una sigla alfanumerica così composta:
\begin{center}
    \textbf{UC[Tipologia]-[Codice]}
\end{center}

\begin{itemize}
    \item \textbf{UC}: abbreviativo di "\textit{Use Case}";
    \item \textbf{Tipologia}: tipologia del caso d'uso:
        \begin{itemize}
            \item \textbf{F}: funzionale, descrive una funzionalità;
            \item \textbf{E}: errore, descrive cosa deve accadere in caso di un determinato errore.
        \end{itemize}
    \item \textbf{Codice}: identificativo numerico del caso d’uso, può identificare dei sotto-casi d’uso / generalizzazioni qualora si presentasse in forma \textbf{[caso].[identificativo]}.
\end{itemize}

\subsubsection*{Attori primari}
L’applicazione presenta due attori primari, ovvero due tipologie di utente finale:
\begin{itemize}
    \item \textbf{Utente non autenticato}: utente che non ha ancora effettuato l’autenticazione, avrà funzionalità limitate rispetto ad un utente autenticato;
    \item \textbf{Utente autenticato}: utente che ha effettuato l’autenticazione alla piattaforma tramite le proprie credenziali (nome utente, \textit{password} e \textit{pin}); ha accesso ad ogni funzionalità messa a disposizione.
\end{itemize}

\label{subsubsec:casi-d'uso}
\subsubsection*{Lista dei principali casi d'uso}
    \textbf{UCF-2: Visualizzazione delle fasi}
        \begin{figure}[H]
            \centering
            \includegraphics[width=0.9\textwidth]{usecase/UCF-2.png}
            \caption{Diagramma dei casi d'uso UCF-2 e UCE-3.}
        \end{figure}
        \begin{itemize}
            \item \textbf{Descrizione:} l’utente vuole visualizzare le fasi di lavorazione della filiera produttiva;
            \item \textbf{Scenario:}
                \begin{enumerate}
                    \item L’utente visualizza le fasi di lavorazione.
                \end{enumerate}
            \item \textbf{Estensioni:} si presenta un errore lato server alla lettura delle fasi di produzione (\textbf{UCE-3});
            \item \textbf{Attore principale:} utente autenticato;
            \item \textbf{Precondizioni:} l’utente è autenticato;
            \item \textbf{Postcondizioni:} l’utente visualizza le fasi di produzione.
        \end{itemize}
      Questo caso d'uso schematizza la relazione che intercorre tra l'applicazione da sviluppare e l'utente (in questo caso, "utente autenticato") per quanto riguarda la visualizzazione delle fasi di lavorazione: questa relazione non è ulteriormente scomponibile in ulteriori sotto-relazioni (tramite sotto-casi d'uso) 
      nè tantomeno è una generalizzazione, ovvero non è possibile individuare ereditarietà con altri casi d'uso.\\
        \textbf{UCF-5: Valorizzazione degli attributi}
        \begin{figure}[H]
            \centering
            \includegraphics[width=0.9\textwidth]{usecase/UCF-5.png}
            \caption{Diagramma dei casi d'uso UCF-5 e UCE-5.}
        \end{figure}
        \begin{itemize}
            \item \textbf{Descrizione:} l’utente vuole inserire manualmente un valore per gli attributi della fase di lavorazione selezionata, creando un \textit{log} di controllo qualità;
            \item \textbf{Scenario:}
                \begin{enumerate}
                    \item L’utente visualizza gli attributi della fase di lavorazione selezionata;
                    \item L'utente assegna un valore agli attributi visualizzati;
                    \item L'utente conferma la scelta.
                \end{enumerate}
            \item \textbf{Estensioni:} si presenta un errore lato server all’inserimento del valore degli attributi della fase di produzione selezionata (\textbf{UCE-5});
            \item \textbf{Attore principale:} utente autenticato;
            \item \textbf{Precondizioni:} l’utente sta visualizzando gli attributi (\textbf{UCF-4});
            \item \textbf{Postcondizioni:} l’utente assegna un valore agli attributi di una fase di produzione che ha selezionato.
        \end{itemize}

        Questo caso d'uso schematizza la relazione che intercorre tra l'applicazione da sviluppare e l'utente autenticato relativamente all'inserimento di dati di controllo qualità: come per il caso precedente, non è scomponibile in ulteriori sotto-relazioni e non è 
        possibile individuare una generalizzazione, dato che i dati di qualità da inserire non sono noti a priori in numero nè in tipo.

\subsection{Requisiti}
\label{subsec:requisiti}

Con "requisito" si intende una specifica di ciò che un sistema software deve fare o possedere al fine di soddisfare un determinato obiettivo o risolvere un particolare problema; i requisiti sono le basi per la \textbf{progettazione} e la \textbf{verifica} di un \textit{software}. \\
La lista di requisiti (che riporto di seguito) offre una base per la comprensione degli esempi di \textbf{progettazione} e \textbf{codifica}. \\
I casi d'uso \textit{UCF-2} e \textit{UCF-5} sono associati rispettivamente ai requisiti \textit{RF-2} e \textit{RF-5} della tabella (parzialmente completa) dei \hyperref[tab:requisiti-funzionali]{requisiti funzionali}.
\subsubsection*{Nomenclatura}

I requisiti qui presenti sono identificati da una sigla alfanumerica così composta:
\begin{center}
    \textbf{R[Tipologia]-[Codice]}
\end{center}

\begin{itemize}
    \item \textbf{R}: abbreviativo di "requisito";
    \item \textbf{Tipologia}: tipologia del requisito:
        \begin{itemize}
            \item \textbf{F}: funzionale, descrive una funzionalità (ciò che un prodotto consente di fare all'utente);
            \item \textbf{Q}: di qualità, indica una caratteristica delle modalità di sviluppo;
            \item \textbf{P}: prestazionale, indica alcune caratteristiche che il prodotto deve avere durante l'esecuzione (non ciò che consente di fare);
            \item \textbf{V}: di vincolo, ovvero riguardante una caratteristica del prodotto stabilita prima del suo sviluppo.
        \end{itemize}
    \item \textbf{Codice}: identificativo numerico del requisito, può identificare dei sotto-requisiti qualora si presentasse in forma \textbf{[requisito].[sotto-requisito]}; i requisiti funzionali relativi a casi d’uso di errore presentano forma \textbf{E[requisito].[sotto-requisito]}.
\end{itemize}

\subsubsection*{Requisiti funzionali}

\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.13\textwidth}>{\centering\arraybackslash}m{0.66\textwidth}>{\centering\arraybackslash}m{0.20\textwidth}>{\centering\arraybackslash}m{0.15\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Codice} & \color{white}\textbf{Descrizione} & \color{white}\textbf{Classificazione} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    RF-1 & L’utente deve poter inserire i propri dati per effettuare il \textit{login} & Obbligatorio \\
    \hline
    RF-1.1 & L’utente deve poter inserire la coppia “nome utente, \textit{password}” per effettuare il \textit{login} & Obbligatorio \\
    \hline
    RF-1.2 & L’utente deve poter inserire il \textit{pin} per effettuare il \textit{login} & Obbligatorio \\
    \hline
    RF-2 & L’utente deve poter visualizzare le fasi di produzione della propria filiera & Obbligatorio \\
    \hline
    RF-3 & L’utente deve poter filtrare le fasi di produzione della propria filiera & Desiderabile \\
    \hline
    RF-3.1 & L’utente deve poter filtrare le fasi di produzione della propria filiera in base al codice dell’ordine & Desiderabile \\
    \hline
    RF-3.2 & L’utente deve poter filtrare le fasi di produzione della propria filiera in base al nome del cliente & Desiderabile \\
    \hline
    RF-4 & L’utente deve poter visualizzare gli attributi della fase di produzione selezionata & Obbligatorio \\
    \hline
    RF-5 & L’utente deve poter assegnare un valore agli attributi della fase di produzione selezionata & Obbligatorio \\
    \hline
    RF-5.1 & L’utente deve poter visualizzare un messaggio positivo in caso l’assegnazione di valori agli attributi avvenga correttamente & Obbligatorio \\
    \hline
    \caption{Requisiti funzionali}
    \label{tab:requisiti-funzionali}
\end{longtable}

\subsubsection*{Requisiti di qualità}
\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.13\textwidth}>{\centering\arraybackslash}m{0.66\textwidth}>{\centering\arraybackslash}m{0.20\textwidth}>{\centering\arraybackslash}m{0.15\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Codice} & \color{white}\textbf{Descrizione} & \color{white}\textbf{Classificazione} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    RQ-1 & Deve essere fornito un manuale utente per l’utilizzo & Obbligatorio \\
    \hline
    RQ-2 & Il codice sorgente deve essere presente in \textit{GitHub} & Obbligatorio \\
    \hline
    \caption{Requisiti di qualità}
\end{longtable}

\subsubsection*{Requisiti prestazionali}
\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.13\textwidth}>{\centering\arraybackslash}m{0.66\textwidth}>{\centering\arraybackslash}m{0.20\textwidth}>{\centering\arraybackslash}m{0.15\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Codice} & \color{white}\textbf{Descrizione} & \color{white}\textbf{Classificazione} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    RP-1 & L’interfaccia utente deve adattarsi a dispositivi \textit{tablet} & Obbligatorio \\
    \hline
    RP-2 & L’interfaccia utente deve adattarsi a smartphone & Facoltativo \\
    \hline
    \caption{Requisiti prestazionali}
\end{longtable}

\subsubsection*{Requisiti di vincolo}
\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.13\textwidth}>{\centering\arraybackslash}m{0.66\textwidth}>{\centering\arraybackslash}m{0.20\textwidth}>{\centering\arraybackslash}m{0.15\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Codice} & \color{white}\textbf{Descrizione} & \color{white}\textbf{Classificazione} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    RV-1 & L’applicazione deve essere sviluppata usando il \textit{framework Angular} alla versione 16 & Obbligatorio \\
    \hline
    RV-2 & L’applicazione deve sfruttare i servizi messi a disposizione dal \textit{software} di \textit{backend} aziendale & Obbligatorio \\
    \hline
    RV-3 & L’applicazione deve essere integrabile in un \texttt{<iframe>} \textit{HTML} dell’applicativo \textit{ADeMES} (\textit{suite} aziendale) & Obbligatorio \\
    \hline
    RV-4 & L’applicazione deve essere una \glslink{pwag}{Progressive Web App} & Obbligatorio \\
    \hline
    RV-5 & L’applicazione deve essere fruibile in inglese & Obbligatorio \\
    \hline
    RV-6 & L’applicazione deve essere fruibile in spagnolo & Facoltativo \\
    \hline
    \caption{Requisiti di vincolo}
\end{longtable}

\subsubsection*{Riepilogo}
Di seguito, due tabelle riassuntive relative a:
\begin{itemize}
    \item Classificazione dei requisiti;
    \item Numero di requisiti individuati per ogni tipologia.
\end{itemize}

\rowcolors{2}{white}{gray!25}
\begin{longtable}{>{\centering\arraybackslash}m{0.25\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Classificazione} & \color{white}\textbf{Quantità} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    Obbligatori & 32 \\
    \hline
    Desiderabili & 3 \\
    \hline
    Facoltativi & 2 \\
    \hline
    \caption{Tabella riassuntiva delle classificazioni dei requisiti}
\end{longtable}

\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.25\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Tipologia} & \color{white}\textbf{Quantità} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    Funzionali & 27 \\
    \hline
    Di qualità & 2 \\
    \hline
    Prestazionali & 2 \\
    \hline
    Di vincolo & 6 \\
    \hline
    \caption{Tabella riassuntiva dei requisiti}
\end{longtable}

\section{Progettazione}
% In questa sezione descriverò lo scopo della progettazione in un progetto, le problematiche riscontrate e mostrerò le classi (e le loro dipendenze, quando utile e possibile, tramite il linguaggio UML) relative ai principali requisiti analizzati nella sezione precedente in modo da dare riscontro effettivo del passaggio da "requisito" a "scelta progettuale".
% In questa sezione includerò anche la progettazione dell'interfaccia grafica relativa alle classi sopra indicate.
Le attività di \textbf{progettazione} hanno come scopo l'ideazione della struttura del prodotto (a livello di programmazione, a livello di interfaccia, a livello di interazioni con l'utente e con altri sistemi) tramite delle scelte effettuate in base a determinati obiettivi (qualità del codice) ed ai requisiti individuati. \\
L'\textit{output} della \textbf{progettazione} è costituito da uno o più documenti di specifica, ovvero documenti contenenti dettagli su come il \textit{software} dovrebbe essere implementato. \\
Di seguito, si approfondiscono le scelte effettuate per:
\begin{itemize}
    \item La fruizione in multipli linguaggi dell'applicazione;
    \item Definire l'interfaccia grafica;
    \item Specificare l'implementazione per i casi d'uso riportati nella sezione \hyperref[subsubsec:casi-d'uso]{§3.3.1}.
\end{itemize}

\subsection{Internazionalizzazione e localizzazione}
\label{subsec:internazionalizzazione}
Per poter capire le scelte progettuali occorre prima dare delle definizioni ai seguenti termini:
\begin{itemize}
    \item \textbf{Internazionalizzazione}: è il processo di \textbf{progettazione} e sviluppo di un prodotto in modo tale da ridurre la difficoltà di adattarlo per renderlo fruibile da persone appartenenti a culture diverse;
    \item \textbf{Localizzazione}: è il processo di adattamento di un prodotto in base alle esigenze culturali di una particolare area / di un particolare mercato.
\end{itemize}
Per quanto riguarda l’internazionalizzazione e la localizzazione del contenuto statico dell’applicazione, si è scelto di usare la libreria \textit{ngx-translate} al posto del pacchetto \textit{@angular/localize}, nativamente supportato da \textit{Angular}. \\
Di seguito, una breve analisi sulle potenzialità e sulle carenze di entrambe le tecnologie, identificate tramite ricerche personali\footnote{\href{https://medium.com/holisticon-consultants/angular-i18n-picking-the-right-tool-for-the-job-b543460801db}{https://medium.com}} \footnote{\href{https://stackoverflow.com/questions/44923138/differences-ngx-translate-vs-i18n}{https://stackoverflow.com}}
\footnote{\href{https://github.com/ngx-translate/core/issues/495}{https://github.com}} e la costruzione di applicazioni \textit{ad hoc}.

\subsubsection*{\textit{@angular/localize}}
\begin{itemize}[align=left]
    \item [Vantaggi]:
        \begin{itemize}
            \item Supportato nativamente dal \textit{framework Angular};
            \item Velocità di esecuzione delle applicazioni che la usano;
            \item Supporto concreto per progetti di grandi dimensioni, data la scalabilità offerta (ovvero la capacità di gestire un aumento del carico di lavoro o delle risorse senza subire un degrado delle prestazioni).
        \end{itemize}
    \item [Svantaggi]:
        \begin{itemize}
            \item Necessita di una compilazione manuale per aggiornare le traduzioni;
            \item Necessita di un passaggio manuale di dati per aggiornare ogni traduzione;
            \item Presenza di multiple versioni dell’applicazione (una per ogni traduzione);
            \item Ogni versione necessita del proprio processo di compilazione;
            \item Ogni cambio di lingua si traduce nel caricamento di una versione diversa della stessa applicazione (con conseguente caricamento di una nuova pagina).
        \end{itemize}
\end{itemize}

\subsubsection*{\textit{ngx-translate}}
\begin{itemize}[align=left]
    \item [Vantaggi]:
        \begin{itemize}
            \item Di facile utilizzo e apprendimento;
            \item Utilizzo di file \textit{JSON}, facilmente gestibili e modificabili;
            \item Consente di gestire la mancanza di traduzione;
            \item Consente un cambio di linguaggio di traduzione senza necessità di ricaricare la pagina.
        \end{itemize}
    \item [Svantaggi]:
        \begin{itemize}
            \item È una libreria nata come soluzione temporanea ai problemi di internazionalizzazione del \textit{framework Angular} e quindi non è frequentemente aggiornata;
            \item Appesantisce l’esecuzione dell’applicazione.
        \end{itemize}
\end{itemize}

La scelta di \textit{ngx-translate} è stata dettata dalle ridotte dimensioni del prodotto e dalle sue esigenze, in particolare:
\begin{enumerate}
    \item \textbf{Integrazione in un \texttt{<iframe>}}: dato che la \textit{web app} deve essere in grado di eseguire all’interno di un \texttt{<iframe>} e l’applicazione “contenitore” utilizza tale libreria, si vuole garantire una traduzione
    uniforme all’interno della schermata visualizzata, evitando di ricaricare l’applicazione all’interno della porzione di schermo delimitata dall’\texttt{<iframe>};
    \item \textbf{Semplicità di sviluppo}: l’applicazione non ha dimensioni tali da prendere in considerazione misure di traduzione scalabili; questo consente di prediligere un approccio orientato alla semplicità di utilizzo durante lo sviluppo e la manutenzione del prodotto;
    \item \textbf{Semplicità di \textit{test}}: il tempo dedicato al \textit{testing} delle traduzioni deve essere proporzionale all’apporto di tale funzionalità ed alle dimensioni dell’applicazione.
\end{enumerate}

\subsection{Interfaccia grafica}
\label{subsec:interfaccia}
La \textbf{progettazione} dell'interfaccia grafica si è basata su colori e componenti grafiche già presenti nel \textit{software ADeMES}: la vera problematica da risolvere in queste attività è stata l'adattamento dell'interfaccia grafica a dispositivi con schermo di dimensioni ridotte (\textit{tablet} e \textit{smartphone}).

\subsubsection*{Schema dei colori}
Riporto di seguito la tabella di tracciamento dei colori utilizzati nell'applicazione \textit{ADeMES} (in formato esadecimale\footnote{Fonte: \href{https://www.w3schools.com/colors/colors_hexadecimal.asp}{https://www.w3schools.com}}) per garantire massima somiglianza da parte di \textit{ADeQA}:
\rowcolors{2}{white}{gray!25}
\begin{longtable}{>{\centering\arraybackslash}m{0.50\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Componente} & \color{white}\textbf{Tema scuro} & \color{white}\textbf{Tema chiaro} \\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    Barra di intestazione & \#232F4E & \#0C2656 \\
    \hline
    Barra laterale & \#000000 & \#FFFFFF \\
    \hline
    Intestazione delle sezioni principali ("attributi" e "\textit{log}"), bordi delle fasi selezionate e bottone per il cambio tema & \#BF71FF & \#123A83 \\
    \hline
    Intestazione delle tabelle & \#452E60 & \#5560BB \\
    \hline
    Bottone di inserimento / aggiornamento dati di qualità & \#5560BB & \#1CBFFF \\
    \hline
    Sfondo delle tabelle & \#323347 & \#F3F5FD \\
    \hline
    Linee divisorie della visualizzazione principale & \#707286 & \#CED0DB \\
    \hline
    Sfondo del riquadro contenente la fase selezionata & \#452E60 & \#9070A6 \\
    \hline
    Sfondo dei riquadri non contenenti la fase selezionata & \#5560BB & \#5560BB \\
    \hline
    Bordi dei riquadri non contenenti la fase selezionata & \#7280F9 & \#6673DB \\
    \hline
    Sfondo della visualizzazione principale & \#1A1B2E & \#F3F5FD \\
    \hline
    \caption{Schema dei colori di \textit{ADeMES} e \textit{ADeQA}}
    \label{tab:colors}
\end{longtable}

\subsubsection*{Autenticazione - passo 1}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{ui-design/login-1.png}
    \caption{Interfaccia ideata per la prima schermata di autenticazione}
\end{figure}
L’interfaccia per il primo passo di accesso è minimale, essendo costituita dal logo dell’applicazione ed un \textit{form} contenente due caselle di testo ed un bottone.

\subsubsection*{Autenticazione - passo 2}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{ui-design/login-2.png}
    \caption{Interfaccia ideata per la seconda schermata di autenticazione}
\end{figure}
L’interfaccia per il secondo passo di accesso è molto simile all’interfaccia per il primo passo, con l’unica differenza di avere una “pulsantiera” per l’inserimento del \textit{pin}; tale scelta è stata effettuata per compatibilità con l’interfaccia grafica del \textit{software ADeMES}, nel quale \textit{ADeQA} dovrà integrarsi.

\subsubsection*{Visualizzazione principale}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{ui-design/principale.png}
    \caption{Interfaccia ideata per la visualizzazione principale}
\end{figure}
Questa pagina appare dopo l'autenticazione ed è contraddistinta dai seguenti elementi:
\begin{itemize}
    \item \textbf{Menù centrale}: contiene l’indicazione della data attuale (mese, anno e settimana corrente), un \textit{widget} per cambiare il tema dell’applicazione (chiaro / scuro), un \textit{widget} per cambiare lingua all’applicazione, il nome utente dell’utente che ha eseguito l’accesso ed il logo aziendale;
    \item \textbf{Menù laterale}: contiene il logo della \textit{suite} di prodotti aziendali ed un pulsante per eseguire il \textit{logout};
    \item \textbf{Barra laterale}: contiene una lista delle fasi di lavorazione attive per l’organizzazione di cui fa parte l’utente che ha fatto l’accesso all’applicazione (con scorrimento verticale in caso eccedessero lo spazio verticale a disposizione);
                                in alto si trova uno strumento di ricerca / filtraggio atto a ridurre il numero di fasi visualizzate;
    \item \textbf{Cornice principale}
        \begin{itemize}
            \item \textbf{Attributi}: questa porzione di schermo consente l’aggiunta e la modifica di informazioni relative al controllo qualità tramite una tabella avente numero di colonne variabile (in base al numero degli attributi);
            \item \textbf{\textit{Log}}: questa porzione di schermo consente la visualizzazione delle informazioni di controllo qualità già inserite per la fase selezionata (oltre alla possibilità di eliminare e indicare la volontà di modificare tali informazioni).
        \end{itemize}
\end{itemize}

\subsubsection*{Visualizzazione per dispositivi mobili}
\label{subsubsec:mobile}
  \begin{figure}[H]
	\centering
	\begin{subfigure}[t]{.5\textwidth}
	  \centering
	  \includegraphics[height=10cm]{ui-design/mobile.png}
	  \caption{Visualizzazione principale - \textit{tablet}}
	\end{subfigure}%
	\begin{subfigure}[t]{.5\textwidth}
	  \centering
	  \includegraphics[height=10cm]{ui-design/smartphone.png}
	  \caption{Visualizzazione principale - \textit{smartphone}}
	\end{subfigure}
	\caption{Visualizzazione principale adattata a dispositivi mobili}
\end{figure}

\subsubsection*{Visualizzazione con tema chiaro}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{ui-design/tema-chiaro.png}
    \caption{Visualizzazione principale con colori chiari}
\end{figure}

\subsection{Architettura}
\label{subsec:architettura}

L'architettura del prodotto si basa sui concetti di "servizio" e "componente" \textit{Angular}:
\begin{itemize}
    \item \textbf{Componente}: un componente del \textit{framework Angular} è una parte riutilizzabile e autonoma dell'interfaccia utente, associata a una porzione specifica della pagina \textit{web} o dell'applicazione. \\
            Un componente \textit{Angular} è composto da un \textit{file TypeScript} che definisce la logica del componente, un \textit{file HTML} che definisce la struttura grafica, un \textit{file} di stile \textit{CSS} per la presentazione e un \textit{file} di \textit{test} per la verifica dell'implementazione;
    \item \textbf{Servizio}: un servizio del \textit{framework Angular} è una classe \textit{singleton} (ovvero della quale esiste una sola istanza in tutto il \textit{software}, durante la sua esecuzione) che consente di avere funzionalità specifiche o dati condivisi all'interno di un'applicazione. \\
            I servizi in \textit{Angular} sono ideati per fornire una separazione delle responsabilità e consentono di manipolare dati, facilitare la comunicazione tra componenti ed effettuare richieste a \textit{software backend}.
\end{itemize}
Di seguito si riporta l'architettura delle classi relative ai casi d'uso fondamentali, indicati nella sezione \hyperref[subsubsec:casi-d'uso]{§3.3.1}.

\subsubsection*{Servizio di gestione delle informazioni riservate}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{class-design/auth.png}
    \caption{Diagramma delle classi del servizio di autenticazione}
\end{figure}

Il servizio \textit{AuthInformationService} consente la gestione delle informazioni di autenticazione: nome utente, identificativo utente, tema grafico predefinito all'avvio e informazioni necessarie alla comunicazione con i servizi di \textit{backend} esposti.\\
Classi relative a componenti \textit{Angular}:
\begin{itemize}
    \item \textit{PhasesComponent}: si occupa della gestione delle fasi di lavorazione;
    \item \textit{LogViewerComponent}: si occupa della visualizzazione dei dati di controllo qualità;
    \item \textit{LogModifierComponent}: si occupa delle operazioni sui dati di controllo qualità salvati.
\end{itemize}

\subsubsection*{Componente di gestione delle fasi}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\textwidth]{class-design/phases.png}
    \caption{Diagramma delle classi del componente di gestione delle fasi}
\end{figure}
Classi relative a servizi \textit{Angular}:
\begin{itemize}
    \item \textit{QualityPhaseService}: servizio per l'ottenimento delle fasi di lavorazione;
    \item \textit{ActivePhaseService}: servizio di gestione della fase selezionata dall'utente, serve per ottenere dinamicamente gli attributi per il controllo qualità.
\end{itemize}

\subsubsection*{Componente di modifica dei dati di controllo qualità}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{class-design/logmodifier.png}
    \caption{Diagramma delle classi del componente di modifica dei dati di qualità}
\end{figure}
Classi relative a servizi \textit{Angular}:
\begin{itemize}
    \item \textit{QualitySaveLogService}: servizio per l'esecuzione di operazioni sui dati di controllo qualità;
    \item \textit{QualityAttributeService}: servizio per l'ottenimento degli attributi per la fase di lavorazione attiva;
    \item \textit{ActiveAttributesService}: servizio di gestione degli attributi del controllo qualità per la fase selezionata dall'utente.
\end{itemize}

\subsubsection*{Componente di visualizzazione dei dati di controllo qualità}
\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{class-design/logviewer.png}
    \caption{Diagramma delle classi del componente di visualizzazione dei dati di qualità}
\end{figure}

\section{Codifica}
% In questa sezione descriverò lo scopo della codifica in un progetto ed indicherò le problematiche riscontrate.
Le attività di \textbf{codifica} hanno come scopo l'implementazione concreta del \textit{software} in base alla specifica fornita dalle attività di \textbf{progettazione}. \\
Tra le difficoltà incontrate in queste attività, segnalo l'inversione della tabella per la visualizzazione tramite \textit{smartphone} (sezione \hyperref[subsubsec:mobile]{§3.4.2}): l'uso del \textit{framework} di componenti grafici \textit{Angular Material} consente di non doversi occupare
dello sviluppo "da zero" di \textit{widget} grafici complessi al prezzo però di una ridotta possibilità di personalizzare i componenti predefiniti; la soluzione adottata sfrutta la possibilità di \textit{scroll} orizzontale del solo contenuto della tabella,
"rompendo" parzialmente una delle regole di base dello sviluppo di interfacce grafiche \footnote{\href{https://mailchimp.com/resources/horizontal-scrolling/}{https://mailchimp.com}}. \\
Di seguito si riporta il contenuto dei file \textit{TypeScript} relativi alle classi derivate dai casi d'uso descritti nella sezione \hyperref[subsubsec:casi-d'uso]{§3.3.1}.

\newpage
\subsection*{Visualizzazione delle fasi}
\begin{lstlisting}[language=JavaScript, caption={Visualizzazione delle fasi}]
this.qualityPhaseService.fetch_2(params)
  .subscribe({
    next: (response) => {
      (response.data != undefined && response.data != null && response.data.length != 0) ? this.phases = response.data : this.openSnackBar(this.translateService.instant("Errore: non ci sono fasi da visualizzare!"), "X");
    },
    error: (error) => {
      const errorDescription = (error.error as ErrorModel) != null ? (error.error as ErrorModel).description : (error.status == 401 ? "Non autorizzato" : "Errore lato server");
      this.openSnackBar(this.translateService.instant("Errore " + error.status + " - " + errorDescription), "X");
      if (error.status == 401) {
        this.logoutService.logout();
      }
      this.loading = false;
    },
    complete: () => { this.loading = false; }
  });
\end{lstlisting}

\subsection*{Integrazione dell'applicazione con \textit{ADeMES}}
\label{subsec:integrazione}
\begin{lstlisting}[language=JavaScript, caption="Integrazione dell'applicazione con \textit{ADeMES}]
this.route.queryParams.pipe(take(1))
    .subscribe(params => {
      this.insideFrame = params['inside'] == "true"
    });
  if (this.insideFrame) {
    window.addEventListener("message", (event) => {
      if (event.source == parent) {
        const data: Message = event.data as Message;
        if (data == undefined ) {
          this.insideFrame = false;
        } else {
          this.iframeInitService.initialize(data);
        }
      }
    });
  }
\end{lstlisting}

% \begin{lstlisting}[language=HTML5, caption={Visualizzazione delle fasi - HTML}]
% <cdk-virtual-scroll-viewport itemSize="100" class="scroll-viewport">
%   <div>
%     <div *ngIf="loading">
%       <mat-card *ngFor="let i of [1,2,3,4,5,6,7,8,9,10]">
%         <mat-card-content>
%           <p class="skeleton skeleton-text"></p>
%           <p class="skeleton skeleton-text"> </p>
%           <p class="skeleton skeleton-text"></p>
%           <p class="skeleton skeleton-text"> </p>
%           <p class="skeleton skeleton-text"> </p>
%         </mat-card-content>
%       </mat-card>
%     </div>
%     <div *ngIf="!loading">
%       <mat-card class="phase" color="primary" *ngFor="let phase of phases"
%         (click)=" select('card-' + phases.indexOf(phase).toString()); setActivePhase(phase)"
%         id="card-{{phases.indexOf(phase)}}">
%         <mat-card-content>
%           <p [innerHTML]="phase.phasetitlehtml! | safeHtml"></p>
%           <p>{{"Inizio" | translate}}: {{phase.start_plan | date:'dd/MM/yyyy HH:mm'}}</p>
%           <p>{{"Fine" | translate}}: {{phase.end_plan | date:'dd/MM/yyyy HH:mm'}}</p>
%         </mat-card-content>
%       </mat-card>
%     </div>
%   </div>
% </cdk-virtual-scroll-viewport>
% \end{lstlisting}

\newpage
\subsection*{Visualizzazione e valorizzazione degli attributi}
% \begin{lstlisting}[language=JavaScript, caption={Aggiornamento della tabella di aggiunta / modifica dei dati di controllo qualità}]

%   /**
%    * Metodo che consente di aggiornare la tabella ad ogni cambio degli attributi attivi (avviene quando si aggiorna la fase attiva)
%    */
%   ngOnInit() {

%     this.activePhaseService.getActivePhase().subscribe(phase => {
%       this.activePhase = phase;
%     });

%     this.mainViewCommunicationsService.viewUpdate.subscribe(() => this.clearDialog())

%     this.mainViewCommunicationsService.updateLog.subscribe((toUpdateLog) => {
%       this.logToUpdate = toUpdateLog;
%       this.updateDataSource = [];

%       const actualQualityValue: { type: string; value: string; } = toUpdateLog.qualityvalue! as any;
%       const json = JSON.parse(actualQualityValue.value);
%       this.form = new FormGroup({});

%       this.activeAttributes.forEach(value => {
%         this.defaultOption = [];
%         if (value.attributevaluetype == "L") {
%           json[value.attributevalue!] = (json[value.attributevalue!.toString() + '_id' as any] + " - " + json[value.attributevalue! as any]);
%           this.defaultOption.push(json[value.attributevalue!]);
%         } else {
%           this.defaultOption.push("");
%         }

%         if (value.attributevaluetype == "Y") {
%           json[value.attributevalue!] = json[value.attributevalue!] == "true";
%         }
%       });

%       this.updateDataSource.push(json);

%       this.activeAttributes.forEach((value, index) => {

%         const formValue: any = this.updateDataSource.at(0)[value.attributevalue!];
%         if (value.attributevaluetype != undefined) {
%           this.form.addControl("control-" + index.toString(), new FormControl(formValue, Validators.required));
%         }
%       });


%       this.addLog = false;
%     })

%     this.activeAttributesService.getActiveAttributes()
%       .subscribe(attributes => {
%         this.addLog = true;
%         this.activeAttributes = attributes.slice();
%         this.displayedColumns = this.activeAttributes.map((attribute) => attribute.attributevalue!);
%         this.initializeForm();
%         this.loadingService.stopModifierLoading();
%       });
%   }
% \end{lstlisting}

\begin{lstlisting}[language=JavaScript, caption={Aggiunta di dati di controllo qualità}]
public add(): void {
  const token: string = this.authInfoService.Token;
  const qualityvalue: string = this.buildQualityValue();
  const params = this.prepareAddParams(token, this.activePhase.c_projectphase_id!, qualityvalue)
  this.qualitySaveLogService.Add(params).subscribe({
    next: (log) => {
      this.openSuccessSnackBar(this.translateService.instant("Inserimento avvenuto correttamente!"), "X");
      this.mainViewCommunicationsService.viewUpdate.next(log);
    },
    error: (error) => this.openFailSnackBar("Errore " + error.status + " - " + error.error.description, "X")
  })
}
\end{lstlisting}

\begin{lstlisting}[language=JavaScript, caption={Modifica di dati di controllo qualità}]
public update(): void {
  const token: string = this.authInfoService.Token;
  const qualityValue = this.buildQualityValue();
  const params = this.prepareUpdateParams(token, this.logToUpdate.c_projectphase_quality_log_id!, qualityValue);
  this.qualitySaveLogService.Update(params).subscribe({
    next: (log) => {
      this.openSuccessSnackBar(this.translateService.instant("Aggiornamento avvenuto correttamente!"), "X")
      this.mainViewCommunicationsService.viewUpdate.next(log);
    },
    error: (error) => this.openFailSnackBar("Errore " + error.status + " - " + error.error.description, "X")
  });
}
\end{lstlisting}

% \begin{lstlisting}[language=HTML5, caption={Visualizzazione e valorizzazione degli attributi - HTML}]

%     <div class="header">{{"Attributi" | translate}}</div>
% <!-- Form di inserimento di un nuovo log -->
% <!-- Per usare un dialog di riepilogo e conferma dei dati inseriti, decommentare la riga sotto (e commentare la riga attualmente attiva) -->
% <!-- <form *ngIf="activeAttributes.length && addLog" [formGroup]="form" (ngSubmit)="addDialog(); this.clearDialog(formDirective)" id="content" #formDirective="ngForm"> -->

% <form *ngIf="activeAttributes.length && addLog" [formGroup]="form" (ngSubmit)="add(); this.clearDialog(formDirective);"
%     id="content" #formDirective="ngForm">
%     <div class="container">
%         <table mat-table [dataSource]="[displayedColumns]" class="mat-elevation-z8" *ngIf="displayedColumns.length">

%             <ng-container [matColumnDef]="attribute.attributevalue!"
%                 *ngFor="let attribute of activeAttributes; let i = index">
%                 <th mat-header-cell *matHeaderCellDef> <label for="control-{{i}}">{{attribute.attributename}}</label>
%                 </th>
%                 <td mat-cell *matCellDef="let column">
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'N'">
%                         <input id="control-{{i}}" matInput type="number" formControlName="control-{{i}}"
%                             color="primary" />
%                     </mat-form-field>
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'S'">
%                         <input id="control-{{i}}" matInput type="text" formControlName="control-{{i}}"
%                             color="primary" />
%                     </mat-form-field>
%                     <mat-checkbox id="control-{{i}}" *ngIf="attribute.attributevaluetype == 'Y'"
%                         formControlName="control-{{i}}"></mat-checkbox>
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'L'">
%                         <mat-select id="control-{{i}}" formControlName="control-{{i}}" color="primary">
%                             <mat-option *ngFor="let option of attribute.optionvalue?.value?.value; let i = index"
%                                 value="{{option}}">{{option | optionsTrim: attribute.optionvalue?.value?.key?.at(i)!}}
%                             </mat-option>
%                         </mat-select>
%                     </mat-form-field>
%                 </td>
%             </ng-container>
%             <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
%             <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
%         </table>
%     </div>
%     <div id="button-tooltip" (click)="tooltip.toggle()" #tooltip="matTooltip"
%         [matTooltip]="'Compilare tutti i campi' | translate" [matTooltipDisabled]="form.valid">
%         <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid" id="submitButton">
%             {{"Aggiungi"| translate}}
%         </button>
%     </div>
% </form>

% <!-- Form di modifica di un log  -->
% <!-- Per usare un dialog di riepilogo e conferma dei dati inseriti, decommentare la riga sotto (e commentare la riga attualmente attiva) -->
% <!-- <form *ngIf="activeAttributes.length && !addLog" [formGroup]="form" (ngSubmit)="updateDialog(); this.clearDialog(formDirective)" id="content" #formDirective="ngForm"> -->

% <form *ngIf="activeAttributes.length && !addLog" [formGroup]="form" (ngSubmit)="update(); clearDialog();" id="content">
%     <div class="container">
%         <table mat-table [dataSource]="[updateDataSource]" class="mat-elevation-z8" *ngIf="displayedColumns.length">
%             <ng-container [matColumnDef]="attribute.attributevalue!"
%                 *ngFor="let attribute of activeAttributes; let i = index">
%                 <th mat-header-cell *matHeaderCellDef>
%                     <label for="control-{{i}}">{{attribute.attributename}}</label>
%                 </th>
%                 <td mat-cell *matCellDef="let column">
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'N'">
%                         <input id="control-{{i}}" matInput type="number" formControlName="control-{{i}}"
%                             color="primary" />
%                     </mat-form-field>
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'S'">
%                         <input id="control-{{i}}" matInput type="text" formControlName="control-{{i}}"
%                             color="primary" />
%                     </mat-form-field>
%                     <mat-checkbox id="control-{{i}}" *ngIf="attribute.attributevaluetype == 'Y'"
%                         formControlName="control-{{i}}"></mat-checkbox>
%                     <mat-form-field appearance="outline" *ngIf="attribute.attributevaluetype == 'L'">
%                         <mat-select [(value)]="defaultOption[i]" id="control-{{i}}" formControlName="control-{{i}}"
%                             color="primary">
%                             <mat-option *ngFor="let option of attribute.optionvalue?.value?.value; let i = index"
%                                 value="{{option}}">{{option | optionsTrim: attribute.optionvalue?.value?.key?.at(i)!}}
%                             </mat-option>
%                         </mat-select>
%                     </mat-form-field>
%                 </td>
%             </ng-container>
%             <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
%             <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
%         </table>
%     </div>
%     <div id="button-tooltip" (click)="tooltip.toggle()" #tooltip="matTooltip"
%         [matTooltip]="'Compilare tutti i campi' | translate" [matTooltipDisabled]="form.valid">
%         <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid" id="submitButton">
%             {{"Aggiorna" | translate}}
%         </button>
%     </div>
% </form>
    
% \end{lstlisting}

\newpage
\subsection*{Visualizzazione dei dati di qualità}
\begin{lstlisting}[language=JavaScript, caption={Aggiornamento degli attributi caratterizzanti il controllo qualità}]
ngOnInit(): void {
  this.activeAttributesService.getActiveAttributes()
    .subscribe(attributes => {
      this.displayedColumns = attributes.map((attribute) => attribute.attributevalue!);
      this.attributes = attributes.slice();
      this.attributes.push({ attributename: 'Azioni', attributevalue: 'Actions' });
      if (this.displayedColumns.length == 0) {
        this.openFailSnackBar("Errore: non sono disponibili attributi per la fase selezionata!", "X");
      }
      else if (this.displayedColumns.findIndex(value => value == 'Actions') == -1) {
        this.displayedColumns.push("Actions");
      }
    });
  this.mainViewCommunicationsService.viewUpdate.subscribe((updatedLog) => {
    this.highlighted = {};
    this.updateTable(this.lastPhase);
    this.blinkLogId = updatedLog.c_projectphase_quality_log_id!;
    setTimeout(() => {
      this.blinkLogId = 0;
    }, 5500);
  });
}
\end{lstlisting}

 \begin{lstlisting}[language=JavaScript, caption={Aggiornamento della tabella di visualizzazione dei dati di controllo qualità}]
 this.qualitySaveLogService.fetch_1(params).subscribe({
   next: (response) => {
     let logs: any[] = [];
     this.activeLogs = response.data!;
     response.data?.forEach((log) => {
       const actualQualityValue: { type: string; value: string; } = log.qualityvalue! as any;
       let aux = JSON.parse(actualQualityValue.value);
       aux.Actions = "";
       aux.c_projectphase_quality_log_id = log.c_projectphase_quality_log_id;
       logs.push(aux);
     });
     logs.sort((firstLog, secondLog) => { return secondLog.c_projectphase_quality_log_id - firstLog.c_projectphase_quality_log_id })
     this.logs.next(logs);
   }
 });
\end{lstlisting}

% \begin{lstlisting}[language=HTML5, caption={Visualizzazione dei dati di qualità - HTML}]
% <div class="header">{{"Log" | translate}}</div>
% <div class="container">
%   <table mat-table [dataSource]="logs" class="mat-elevation-z8" *ngIf="displayedColumns.length">

%     <ng-container [matColumnDef]="column.attributevalue!" *ngFor="let column of attributes; let i = index">
%       <th mat-header-cell *matHeaderCellDef> <label>{{column.attributename}}</label> </th>
%       <td mat-cell *matCellDef="let element"
%         [ngClass]="blinkLogId == element.c_projectphase_quality_log_id? 'blink' : highlighted == element? 'highlighted' : ''">
%         <div *ngIf="column.attributevalue != 'Actions' && column.attributevaluetype != 'Y'">
%           {{element[column.attributevalue!]}}
%         </div>

%         <mat-icon *ngIf="column.attributevaluetype == 'Y' && element[column.attributevalue!] == 'true'"
%           aria-hidden="false" [attr.aria-label]="'Vero' | translate" fontIcon="check"></mat-icon>
%         <mat-icon *ngIf="column.attributevaluetype == 'Y' && element[column.attributevalue!] == 'false'"
%           aria-hidden="false" [attr.aria-label]="'Falso' | translate" fontIcon="close"></mat-icon>

%         <div id="buttons">
%           <button id="edit" *ngIf="column.attributevalue == 'Actions'" mat-raised-button
%             [title]="'Modifica' | translate" (click)="edit(element); highlight(element)">
%             <mat-icon aria-hidden="false" [attr.aria-label]="'Modifica' | translate" fontIcon="edit"></mat-icon>
%           </button>
%           <button id="delete" *ngIf="column.attributevalue == 'Actions'" mat-raised-button
%             [title]="'Elimina' | translate" (click)="deleteDialog(element)">
%             <mat-icon aria-hidden="false" [attr.aria-label]="'Elimina' | translate" fontIcon="delete"></mat-icon>
%           </button>
%         </div>
%       </td>

%       <tr id="noDataRow" class="mat-row" *matNoDataRow>
%         <td class="mat-cell" [attr.colspan]="displayedColumns.length">
%           {{"Non ci sono log di qualita' per questa fase!" | translate}}
%         </td>
%       </tr>
%     </ng-container>

%     <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
%     <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
%   </table>
% </div>
% \end{lstlisting}

\section{Verifica}
% In questa sezione descriverò le modalità con le quali si è accertato che 
Le attività di \textbf{verifica} hanno come scopo l'accertamento che:
\begin{itemize}
  \item Il prodotto \textit{software} in uscita dal processo di \textbf{codifica} soddisfi le specifiche stabilite nelle attività di \textbf{progettazione};
  \item L’esecuzione delle attività di \textbf{analisi}, \textbf{progettazione} e \textbf{codifica} (per un determinato periodo di tempo) non abbia introdotto errori.
\end{itemize}

La \textbf{verifica} si svolge mediante l'uso di due approcci tra loro complementari:
\begin{itemize}
  \item \textbf{Analisi statica}: è un metodo di \textbf{verifica} che non prevede l'esecuzione del codice prodotto, si applica sia al codice sorgente sia alla documentazione prodotta e punta all'individuazione di errori nel prodotto quanto prima possibile rispetto all'inizio delle attività di sviluppo;
  \item \textbf{Analisi dinamica}: è un metodo di \textbf{verifica} del corretto funzionamento del \textit{software} durante la sua esecuzione, identificando errori, problemi di prestazioni o comportamenti indesiderati attraverso l'esecuzione di \textit{test} specifici.
\end{itemize}

\subsection*{Analisi statica}
Durante il periodo di \textit{stage}, ho eseguito attività di \textbf{analisi statica} manualmente (senza quindi avvalermi di strumenti \textit{software}) per quanto riguarda la documentazione di progetto, data l'assenza di direttive in relazione allo stile di scrittura del codice sorgente: 
gli obiettivi di tali attività erano l'individuazione e la conseguente correzione di errori ortografici. \\
Al termine della scrittura (o modifica) di una porzione di documento unitaria (una sezione o sottosezione di massimo due pagine), seguivano la rilettura e la correzione degli eventuali errori.

\subsection*{Analisi dinamica}
Durante le attività di tirocinio, ho eseguito prove (\textit{test}) di \textbf{analisi dinamica} di tre tipologie distinte, seguendo di fatto le indicazioni del modello di sviluppo \textit{software} "a V":
\begin{itemize}
  \item \textbf{Test di unità}: un \textit{test} di unità si può identificare nel compito di controllare se l'esecuzione della più piccola parte utilmente verificabile del codice sorgente (unità) procede come previsto dalla specifica di \textbf{progettazione};
  \item \textbf{Test di integrazione}: un \textit{test} di integrazione è il compito di verificare che l'interazione e combinazione delle diverse unità di codice avvenga come previsto dalle attività di \textbf{progettazione}, dopo che esse state messe alla prova singolarmente mediante \textit{test} di unità;
  \item \textbf{Test di sistema}: un \textit{test} di sistema è il controllo delle funzionalità del codice sorgente nel suo complesso, accertando che soddisfi tutti i requisiti stabiliti nelle attività di \textbf{analisi}.
\end{itemize}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.7\textwidth]{images/v-model.png}
    \caption[Modello di sviluppo del prodotto adottato]{Modello di sviluppo adottato\footnotemark}
\end{figure}
\footnotetext{Fonte: \href{https://tutorials.freshersnow.com/software-engineering/v-model/}{https://tutorials.freshersnow.com}}
Ho sviluppato del codice che concretizzasse in forma di \textit{software} i \textit{test} di unità e di integrazione tramite il \textit{framework Jasmine}: questo rende possibile la loro esecuzione, se l'ambiente di \textit{test} è ben configurato, in maniera ripetibile, automatizzata e rapida. \\
Ho deciso di eseguire i \textit{test} di sistema manualmente data la poca esperienza con il \textit{framework Jasmine} ed il poco tempo rimasto per il completamento delle attività di progetto: ritengo valida questa scelta date le dimensioni ridotte del prodotto e la possibilità di automatizzare queste prove, data la presenza della documentazione necessaria.

\section{Validazione}
\label{sec:validazione}
% In questa sezione descriverò le modalità con le quali si è accertato che il prodotto finito fosse conforme alle aspettative.
Le attività di \textbf{validazione} hanno come scopo l'accertamento che il prodotto finito sia conforme alle aspettative di chi ha la visione dei bisogni da soddisfare con il prodotto (proponente). \\
Viene effettuato un collaudo in presenza del committente, ovvero colui (persona fisica, azienda o ente) che ha interesse diretto nel risultato finale del progetto: nel mio caso, le figure del proponente e del committente sono rappresentate dal tutor aziendale \textit{Michele Rigo} ed il collaudo
ha avuto luogo durante l'ultima settimana di attività. \\
In seguito all'accettazione del prodotto, ho potuto dedicare i restanti giorni all'esecuzione di attività di integrazione e studio della libreria di componenti grafici \textit{DevExtreme}, come riportato nella sezione \hyperref[sec:innovazione]{§1.4}.


\section{Risultato finale}
% In questa sezione descriverò i prodotti di progetto dal punto di vista della qualità (qui vi sarà particolare enfasi sul prodotto software) e della quantità.
Riporto alcune statistiche di progetto, seguite da schermate dell'applicazione \textit{ADeQA} e spiegazione, ove necessario, delle differenze tra l'interfaccia grafica realizzata e l'interfaccia grafica progettata.

\subsection{Statistiche qualitative e quantitative}
\subsubsection*{Requisiti soddisfatti}
Il prodotto sviluppato ricopre tutti i requisiti indicati nelle tabelle della sezione \hyperref[subsec:requisiti]{§3.3.2} tranne \textit{RF-3}, \textit{RF-3.1} e \textit{RF-3.2}: questo è dovuto alla mancata esposizione dei servizi necessari per il filtraggio delle fasi di lavorazione.
\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.25\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Tipologia} & \color{white}\textbf{Quantità} & \color{white}\textbf{Soddisfatti}\\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    Funzionali & 27 & 25 \\
    \hline
    Di qualità & 2 & 2\\
    \hline
    Prestazionali & 2 & 2 \\
    \hline
    Di vincolo & 6 & 6\\
    \hline
    \caption{Tabella riassuntiva dei requisiti soddisfatti}
\end{longtable}

\subsubsection*{\textit{Code coverage}}
Con "\textit{code coverage}" si fa riferimento a una metrica utilizzata nel campo dello sviluppo \textit{software} per valutare quanto del codice sorgente di un'applicazione è stato eseguito durante l'esecuzione di un insieme di \textit{test}; non garantisce necessariamente la qualità dei \textit{test} eseguiti 
e può rilevare la presenza di malfunzionamenti, ma non dimostra la loro assenza (\textit{Dijkstra} \footnote{Fonte: \href{https://vitolavecchia.altervista.org/tecniche-metodologie-test-software/}{https://vitolavecchia.altervista.org}}). \\
Le metriche di \textit{code coverage} utilizzate nel progetto sono:
\begin{itemize}
  \item \textit{\textbf{Line coverage}}: indica la percentuale di linee di codice eseguite durante l'esecuzione dei \textit{test} rispetto al totale delle linee di codice sulle quali la prova viene eseguita;
  \item \textit{\textbf{Branch coverage}}: percentuale di rami condizionali (decisioni) che sono stati attraversati durante l'esecuzione dei \textit{test} rispetto al totale dei rami presenti nel codice;
  \item \textit{\textbf{Statement coverage}}: percentuale di istruzioni che sono state eseguite durante l'esecuzione dei \textit{test} rispetto al totale delle istruzioni nel codice;
  \item \textit{\textbf{Function coverage}}: percentuale di funzioni che sono state "chiamate" durante l'esecuzione dei \textit{test} rispetto al totale delle funzioni nel codice.
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{test.png}
  \caption[\textit{Code coverage} di progetto]{\textit{Code coverage} di progetto}
\end{figure}

\subsubsection*{Quantità di prodotti}
Nelle statistiche sotto riportate, si può notare che la voce "linee di codice" differisce dal totale delle linee di codice testate dell'immagine conclusiva della sezione precedente: il motivo si trova nel fatto che le linee di codice testate non comprendono 
istruzioni di dichiarazione variabili, importazione di file e, in generale, tutto ciò che non è contenuto all'interno di un metodo.

\rowcolors{2}{gray!25}{white}
\begin{longtable}{>{\centering\arraybackslash}m{0.50\textwidth}>{\centering\arraybackslash}m{0.25\textwidth}}
    \hline
    \rowcolor{black}
    \color{white}\textbf{Metrica} & \color{white}\textbf{Valore}\\
    \hline
    \endhead % This line indicates the end of the header and the start of the repeated heading on subsequent pages
    Documenti prodotti & 3 \\
    \hline
    Pagine di documentazione & 69 \\
    \hline
    Componenti \textit{Angular} & 11 \\
    \hline
    Servizi \textit{Angular} & 9 \\
    \hline
    \textit{Pipes Angular} & 2 \\
    \hline
    Modelli \textit{TypeScript} & 1 \\
    \hline
    Linee di codice & 4582 \\
    \hline
    Numero di file & 67 \\
    \hline
    \caption{Statistiche quantitative sul prodotto}
\end{longtable}

\subsection{Interfaccia grafica}
\label{subsec:interfaccia-risultato}
\subsubsection*{Autenticazione}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.9\textwidth]{user-manual/login-username.png}
  \caption{Schermata di autenticazione - passo 1}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=0.9\textwidth]{user-manual/login-pin.png}
  \caption{Schermata di autenticazione - passo 2}
\end{figure}
Entrambe le schermate di autenticazione sono state realizzate rispettando le specifiche di progettazione grafica.

\subsubsection*{Visualizzazione principale}

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{user-manual/dashboard.png}
  \caption{Schermata principale}
\end{figure}
Anche in questo caso, vi è un'importante somiglianza con l'interfaccia ideata nel processo di \textbf{progettazione}: dalle figure sottostanti, si possono capire quali sono state le modifiche apportate alle specifiche.

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{user-manual/intestazione.png}
  \caption{Intestazione - visualizzazione \textit{desktop}}
\end{figure}
Il \textit{widget} di intestazione è stato dotato, a sinistra, di un pulsante grafico che serve per mostrare / far scomparire la lista di fasi di lavorazione.

\begin{figure}[H]
  \begin{minipage}{0.3\textwidth}
    \includegraphics[height=75mm]{user-manual/barra-laterale.png}
    \caption{Barra laterale}
  \end{minipage}%
  \begin{minipage}{0.7\textwidth}
    Per quanto riguarda la visualizzazione \textit{desktop}, la barra laterale contiene un pulsante di disconnessione in più rispetto alla progettazione: questo è stato concesso per evitare la ri-esecuzione del primo passo di autenticazione agli utenti che vogliono autenticarsi come fossero un altro operatore.
  \end{minipage}
  
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{user-manual/intestazione-mobile.png}
  \caption{Intestazione - visualizzazione \textit{mobile}}
\end{figure}
Per quanto riguarda la visualizzazione per dispositivi mobili, la barra di intestazione (così come la barra laterale per la visualizzazione \textit{desktop}) contiene un pulsante di disconnessione in più rispetto alla progettazione.